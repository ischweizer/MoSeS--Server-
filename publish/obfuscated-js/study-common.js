$(".dropdown").each(function(){$(this).removeClass("active")});$(".nav-menu4").addClass("active");$('[name="start_date"]').datepicker({dateFormat:"yy-mm-dd"});$('[name="end_date"]').datepicker({dateFormat:"yy-mm-dd"});$('[name="start_after_n_devices"]').change(function(){(!isNumber($(this).val())||1>$(this).val())&&$(this).val("1")});
$('[name="publishMethodInvite"]').change(function(){$(this).is(":checked")?$('[name="max_devices_number"]').attr("disabled",!1):$('[name="max_devices_number"]').attr("disabled",!0)});$(".content_appears_here").on("click",".scrollTo",function(b){b.preventDefault();scrollToElement(".survey_select")});$('[name="btnAddSurvey"]').click(function(b){b.preventDefault();$(this).parent().parent().parent().find(".survey_controls").show()});
$('[name="btnAddSurvey"], [name="btnModifySurvey"]').click(function(b){b.preventDefault();$(this).parent().parent().parent();$(".btnCreateOK").css("margin-left","10em");$(".btnCreateOK").css("margin-top","4em");b=$(".my_control-group_create").find(".controls").html();$(".my_control-group_create").remove();$(".survey_controls").append(b);$(".btnUpdateOK").css("margin-top","4em");$(".btnUpdateCancel").css("margin-left","12em");$(".btnUpdateCancel").css("margin-top","4em");b=$(this).parent().find(".controls:last").html();
$(this).parent().find(".control-group-update").remove();$(this).parent().find(".survey_controls").append(b);b=$(this).find('[name="progress"]').parent().html();$(this).find('[name="progress"]').parent().parent().remove();$(this).parent().find(".survey_controls").append(b);$(this).find('[name="progress"]').css("margin-top","2.5em");$(this).find('[name="progress"]').css("float","right");$(this).hide()});
$(".survey_controls").on("click",".btnAddForm",function(b){b.preventDefault();var e=$(this).parent().parent().parent(),c=$(this).parent().parent();9001!=parseInt(c.find(".survey_select :selected").val())?$.post("content_provider.php",{get_questions:c.find(".survey_select :selected").val(),get_questions_pwd:6767}).done(function(b){if(b){b=$.parseJSON(b);var a='<div class="row-fluid survey_form" style="border:2px solid #CCC;"><div class="survey_name text-center">'+c.find(".survey_select :selected").text()+
'</div><div class="span10 survey_body">\x3c!--Body content--\x3e<div class="survey_question_container">';$(b.content).each(function(b,c){a+="<div>";a+=b+1+'. <span class="survey_question">'+c.question+"</span>";1==c.question_mandatory&&(a+='<label style="float: right;"><input type="checkbox" class="survey_question_mandatory" checked="checked" disabled="disabled" style="margin-right: 0.5em;">Mandatory question</label>');a+="<br>";switch(c.question_type){case 1:a+='<ul><li><input type="radio" disabled="disabled"><span class="survey_answer">Yes</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">No</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Not sure</span></li></ul>';
a+='<input class="survey_question_type" type="hidden" value="1">';break;case 2:a+='<ul><li><textarea cols="20" rows="3" disabled="disabled" placeholder="Answer will be here..."></textarea></li></ul>';a+='<input class="survey_question_type" type="hidden" value="2">';break;case 3:a+='<ul><li><input type="radio" disabled="disabled"><span class="survey_answer">Strongly Disagree</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Disagree</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Neutral</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Agree</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Strongly Agree</span></li></ul>';
a+='<input class="survey_question_type" type="hidden" value="3">';break;case 4:for(var d="<ul>",e=1;e<=c.question_number_of_answers;e++)d+='<li><input type="checkbox" value="'+e+'" disabled="disabled"><span><input type="text" class="survey_answer" placeholder="Answer here" disabled="disabled"></span></li>';a+=d+"</ul>";a+='<input class="survey_question_type" type="hidden" value="4">';break;case 5:d="<ul>";for(e=1;e<=c.question_number_of_answers;e++)d+='<li><input type="radio" value="'+e+'" disabled="disabled"><span><input type="text" class="survey_answer" placeholder="Answer here" disabled="disabled"></span></li>';
a+=d+"</ul>";a+='<input class="survey_question_type" type="hidden" value="5">';break;default:a+="Something went wrong with displaying question type answers!<br>"}a+="</div>"});a+='</div><i class="icon icon-chevron-up scrollTo"></i><input type="hidden" class="survey_form_id" value="'+c.find(".survey_select :selected").val()+'"></div><div class="span1"><button class="btn btn-danger btnRemoveSurvey">X</button></div></div>';e.find(".content_appears_here").append(a);scrollToElement($(".survey_form").last())}}):
(b='<div class="row-fluid survey_form" style="border:2px solid #CCC;"><div class="survey_name text-center">'+c.find(".survey_select :selected").text()+'</div><div class="span10 survey_body">\x3c!--Body content--\x3e<div class="survey_question_container">Compose your questions below!<br>  <div>    <div class="survey_elements_container">      <select class="survey_elements">         <option value="1">Yes/No question</option>         <option value="2">Text question</option>         <option value="3">Likert scale question</option>         <option value="4">Multiple choice question</option>         <option value="5">Single choice question</option>      </select>      <label class="survey_elements" style="display: none;">Number of answers:</label>      <input type="text" title="Number of answers" value="5" maxlength="2" style="width: 1.2em; display: none;">      <button class="btn survey_elements btnAddQuestionOK">Add question</button>    </div>  </div></div><input type="hidden" class="survey_form_questions_counter" value="0"><input type="hidden" class="survey_form_id" value="9001"></div><div class="span1"><button class="btn btn-danger btnRemoveSurvey">X</button></div></div>',
e.find(".content_appears_here").append(b),scrollToElement($(".survey_form").last()))});
$(".content_appears_here").on("change",".survey_elements",function(b){b.preventDefault();switch(parseInt($(this).val())){case 1:$(this).parent().find(":text").hide();$(this).parent().find("label").hide();break;case 2:$(this).parent().find(":text").hide();$(this).parent().find("label").hide();break;case 3:$(this).parent().find(":text").hide();$(this).parent().find("label").hide();break;case 4:$(this).parent().find(":text").show();$(this).parent().find("label").show();break;case 5:$(this).parent().find(":text").show(),
$(this).parent().find("label").show()}return!1});$(".content_appears_here").on("click",".btnRemoveSurvey",function(b){b.preventDefault();$(this).parent().parent().remove();return!1});$(".content_appears_here").on("click",".survey_remove_question",function(b){b.preventDefault();$(this).parent().remove();return!1});
$(".content_appears_here").on("click",".btnAddQuestionOK",function(b){b.preventDefault();b=$(this).parent().parent().parent().parent();var e=parseInt($(this).parent().find(":text").val()),c=$(this).parent().parent().parent();c.append("<div></div>");$(this).parent().find(":text").hide();$(this).parent().find("label").hide();c.find(":last").html($(this).parent().parent().html());c='<span class="survey_question_number">'+(parseInt(b.find(".survey_form_questions_counter").val())+1)+'. </span> <input type="text" class="survey_question" placeholder="Your question here"><label style="float: right;"><input type="checkbox" class="survey_question_mandatory" style="margin-right: 0.5em;">Mark as mandatory</label><button class="btn btn-link btnRemoveQuestion">Remove question</button><br>';
switch(parseInt($(this).parent().find(".survey_elements").val())){case 1:var d,c=c+'<ul><li><input type="radio" disabled="disabled"><span class="survey_answer">Yes</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">No</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Not sure</span></li></ul><input type="hidden" class="survey_question_type" value="1">';$(this).parent().parent().append(c);break;case 2:c+='<ul><li><textarea cols="20" rows="3" disabled="disabled" placeholder="Answer will be here..."></textarea></li></ul>';
c+='<input type="hidden" class="survey_question_type" value="2">';$(this).parent().parent().append(c);break;case 3:c+='<ul><li><input type="radio" disabled="disabled"><span class="survey_answer">Strongly Disagree</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Disagree</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Neutral</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Agree</span></li><li><input type="radio" disabled="disabled"><span class="survey_answer">Strongly Agree</span></li></ul>';
c+='<input type="hidden" class="survey_question_type" value="3">';$(this).parent().parent().append(c);break;case 4:d="<ul>";for(var a=1;a<=e;a++)d+='<li><input type="checkbox" value="'+a+'" disabled="disabled"><span><input type="text" class="survey_answer" placeholder="Answer here"></span></li>';c+=d+"</ul>";c+='<input type="hidden" class="survey_question_type" value="4">';$(this).parent().parent().append(c);break;case 5:d="<ul>";for(a=1;a<=e;a++)d+='<li><input type="radio" value="'+a+'" disabled="disabled"><span><input type="text" class="survey_answer" placeholder="Answer here"></span></li>';
d+="</ul>";c+=d;c+='<input type="hidden" class="survey_question_type" value="5">';$(this).parent().parent().append(c);break;default:$(this).parent().append("Something went wrong! =(")}b.find(".survey_form_questions_counter").val(parseInt(b.find(".survey_form_questions_counter").val())+1);$(this).parent().remove();return!1});
$(".content_appears_here").on("click",".btnRemoveQuestion",function(b){b.preventDefault();b=$(this).parent().parent().parent().parent();$(this).parent().remove();var e=1;b.find(".survey_question_number").each(function(){$(this).text(e+". ");e++});b.find(".survey_form_questions_counter").val(parseInt(b.find(".survey_form_questions_counter").val())-1)});